# 🎛️ دليل التحكم في الشبكة

## نظرة عامة

قسم التحكم في الشبكة يوفر مراقبة ومتابعة حية لجميع الاتصالات النشطة ويتيح لك إدارة الجلسات النشطة والتحكم في الوصول للإنترنت.

---

## الوصول لصفحة التحكم في الشبكة

من القائمة الجانبية، انقر على 🎛️ "التحكم في الشبكة" للوصول إلى صفحة المراقبة والتحكم الحية.

---

## أقسام صفحة التحكم

### 1. نظرة عامة سريعة (أعلى الصفحة)

#### مؤشرات الحالة الحية
```
🔵 الاتصالات النشطة: 12        🌐 أجهزة التوجيه المتصلة: 2/2
📊 إجمالي البيانات المستهلكة: 1.2 GB    ⚡ متوسط السرعة: 2.5 Mbps
⏱️ متوسط مدة الجلسة: 45 دقيقة        📈 الحمولة الحالية: 65%
```

#### مؤشر الحالة العامة
- 🟢 **ممتاز** (0-50% حمولة): النظام يعمل بأفضل حالاته
- 🟡 **جيد** (50-80% حمولة): النظام يعمل بكفاءة عادية  
- 🟠 **مرتفع** (80-95% حمولة): يحتاج مراقبة
- 🔴 **محمل بشدة** (+95% حمولة): قد يحتاج تدخل

### 2. الاتصالات النشطة

#### جدول الجلسات الحية
```
| العميل        | كود الكرت  | وقت البداية    | الوقت المتبقي | البيانات المستهلكة | السرعة   | الإجراءات |
|-------------- |-----------|----------------|--------------|-------------------|---------|----------|
| 192.168.1.100 | WIFI-A123 | 2:30 م        | 21س 30د      | 150 MB / 1000 MB  | 1.2 Mbps| قطع     |
| 192.168.1.101 | WIFI-B456 | 3:15 م        | 8س 45د       | 450 MB / 2000 MB  | 2.1 Mbps| قطع     |
| 192.168.1.102 | WIFI-C789 | 3:45 م        | 20س 15د      | 75 MB / 500 MB    | 512 Kbps| قطع     |
```

#### معلومات تفصيلية لكل جلسة:
- **عنوان IP**: عنوان العميل في الشبكة المحلية
- **عنوان MAC**: معرف الجهاز الفريد (اختياري)
- **كود الكرت**: الكرت المستخدم للاتصال
- **وقت البداية**: متى بدأ الاتصال
- **الوقت المتبقي**: الوقت المتبقي قبل انتهاء الجلسة
- **استهلاك البيانات**: كم استهلك / الحد الأقصى
- **السرعة الحالية**: سرعة التحميل والرفع
- **جهاز التوجيه**: أي جهاز يدير هذا العميل

### 3. مراقبة أجهزة التوجيه

#### حالة الأجهزة
```
📡 راوتر الطابق الأول (192.168.1.1)
   حالة: 🟢 متصل | المستخدمين: 8 | استهلاك المعالج: 25% | الذاكرة: 45%
   آخر استجابة: منذ 30 ثانية | زمن التشغيل: 15 يوم 6 ساعات

📡 راوتر الطابق الثاني (192.168.1.2)  
   حالة: 🟢 متصل | المستخدمين: 4 | استهلاك المعالج: 15% | الذاكرة: 32%
   آخر استجابة: منذ 45 ثانية | زمن التشغيل: 8 أيام 12 ساعة
```

#### مؤشرات أداء الأجهزة:
- **حالة الاتصال**: متصل/منقطع/يتم إعادة الاتصال
- **عدد المستخدمين**: كم عميل متصل بكل جهاز
- **استهلاك المعالج**: نسبة استخدام المعالج
- **استهلاك الذاكرة**: نسبة استخدام الذاكرة
- **جودة الإشارة**: قوة الإشارة اللاسلكية
- **حركة البيانات**: التحميل والرفع

### 4. الإحصائيات الحية

#### رسم بياني لاستهلاك البيانات
```
استهلاك البيانات آخر ساعة (بالميجابايت)

  50 ┤
  40 ┤  ●
  30 ┤ ●  ●    ●
  20 ┤●   ●  ●  ●  ●
  10 ┤     ●     ●  ●
   0 └─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─┬─
     4م 5م 6م 7م 8م 9م الآن
```

#### توزيع أنواع الكروت النشطة
- 🔵 كروت عادية: 8 (67%)
- 🟢 كروت مميزة: 3 (25%)  
- 🟣 كروت VIP: 1 (8%)

---

## العمليات والتحكم

### قطع الاتصال

#### قطع جلسة واحدة
1. في جدول الاتصالات النشطة، ابحث عن الجلسة المطلوبة
2. انقر على زر "قطع" في عمود الإجراءات
3. أكد العملية في النافذة المنبثقة
4. سيتم قطع الاتصال فوراً

#### أسباب قطع الاتصال:
```
📋 أسباب شائعة لقطع الاتصال:

✅ انتهت صلاحية الكرت      ✅ تم استهلاك البيانات بالكامل
✅ طلب من الإدارة           ✅ نشاط مشبوه أو مخالف
✅ صيانة الشبكة            ✅ تجاوز حد السرعة
```

#### قطع اتصالات متعددة
1. حدد الجلسات المطلوب قطعها بوضع علامة ✓
2. انقر على "قطع المحدد" أعلى الجدول
3. اختر السبب من القائمة المنسدلة
4. أكد العملية

### إدارة حدود السرعة

#### تعديل سرعة جلسة نشطة
1. انقر على أيقونة ⚙️ بجانب الجلسة
2. أدخل الحد الجديد للسرعة (KB/s)
3. اختر: التحميل فقط / الرفع فقط / كلاهما
4. انقر على "تطبيق"

```
مثال تعديل السرعة:
الحد الحالي: 1024 KB/s
الحد الجديد: 512 KB/s ← لتوفير عرض النطاق
```

### تمديد الجلسات

#### إضافة وقت لجلسة نشطة
1. انقر على أيقونة ⏰ بجانب الجلسة
2. اختر مقدار الوقت الإضافي:
   - 30 دقيقة
   - 1 ساعة  
   - 2 ساعة
   - وقت مخصص
3. أدخل سبب التمديد (اختياري)
4. انقر على "تمديد"

### إضافة بيانات إضافية

#### زيادة حد البيانات
1. انقر على أيقونة 📊 بجانب الجلسة
2. أدخل مقدار البيانات الإضافية (MB)
3. حدد إذا كان هذا مجاني أم مدفوع
4. أكد العملية

---

## المراقبة والتنبيهات

### إعداد التنبيهات التلقائية

#### تنبيهات الاستهلاك
```
🔔 تنبيه عند:
   ☑️ استهلاك 80% من البيانات
   ☑️ تبقي أقل من 10 دقائق
   ☑️ عدم النشاط لأكثر من 30 دقيقة
   ☑️ سرعة منخفضة جداً (أقل من 100 KB/s)
```

#### تنبيهات النظام
```
🚨 تنبيهات مهمة:
   ☑️ انقطاع جهاز توجيه
   ☑️ زيادة الحمولة عن 90%
   ☑️ فشل في المصادقة (3 مرات متتالية)
   ☑️ استهلاك غير طبيعي للبيانات
```

### مراقبة الاستخدام في الوقت الفعلي

#### معدل تحديث البيانات
- **كل 10 ثوان**: حالة الجلسات النشطة
- **كل 30 ثانية**: إحصائيات أجهزة التوجيه  
- **كل دقيقة**: الرسوم البيانية والإحصائيات
- **كل 5 دقائق**: فحص الاتصال بالأجهزة

#### وضع المراقبة المكثفة
لتفعيل المراقبة المكثفة (كل 5 ثوان):
1. انقر على زر "مراقبة مكثفة" أعلى الصفحة
2. سيتم تحديث البيانات بشكل أسرع
3. مفيد أثناء الصيانة أو حل المشاكل
4. يستهلك موارد أكثر - لا تتركه مفعلاً دائماً

---

## التقارير والسجلات

### سجل النشاط

#### أنواع الأحداث المسجلة:
```
📝 سجل أحداث اليوم:

8:45م - تفعيل كرت WIFI-A123 من عنوان 192.168.1.100
8:40م - انتهاء جلسة WIFI-X999 بعد استهلاك كامل البيانات  
8:35م - قطع اتصال WIFI-B456 بطلب من الإدارة
8:30م - إعادة اتصال جهاز التوجيه 192.168.1.2
8:25م - تحذير: استهلاك عالي للبيانات من WIFI-C789
```

### تصدير البيانات

#### تصدير تقرير الجلسات النشطة
1. انقر على "تصدير" أعلى جدول الجلسات
2. اختر الصيغة: Excel / CSV / PDF
3. حدد البيانات المطلوب تضمينها:
   - معلومات العملاء
   - إحصائيات الاستهلاك  
   - أوقات الجلسات
   - أجهزة التوجيه
4. انقر على "تحميل"

#### تصدير سجل النشاط
- **لليوم الحالي**: جميع أحداث اليوم
- **لفترة مخصصة**: حدد التاريخ من/إلى
- **لكرت محدد**: سجل كرت معين فقط
- **لجهاز توجيه محدد**: أحداث جهاز واحد

---

## استكشاف الأخطاء

### مشاكل شائعة

#### المشكلة: عميل متصل لكن لا يتصفح
**التشخيص:**
1. تحقق من حالة الكرت في الجدول
2. راجع الوقت المتبقي والبيانات المتاحة
3. فحص اتصال جهاز التوجيه

**الحلول:**
```
✅ تحديث بيانات الجلسة
✅ إعادة تفعيل الكرت
✅ فحص إعدادات جهاز التوجيه
✅ قطع وإعادة الاتصال
```

#### المشكلة: السرعة بطيئة جداً
**الأسباب المحتملة:**
- حد السرعة المحدد للكرت منخفض
- ازدحام في الشبكة
- مشكلة في جهاز التوجيه
- مشكلة في اتصال الإنترنت الرئيسي

**الحلول:**
1. فحص حد السرعة للكرت وزيادته إذا لزم
2. توزيع العملاء على أجهزة توجيه متعددة
3. إعادة تشغيل جهاز التوجيه المتأثر
4. فحص اتصال الإنترنت الرئيسي

#### المشكلة: جهاز توجيه يظهر منقطع
**خطوات التشخيص:**
1. فحص الاتصال الفيزيائي بالجهاز
2. محاولة ping من خط الأوامر
3. فحص إعدادات الشبكة
4. مراجعة سجلات الأخطاء

**الحلول:**
```bash
# فحص الاتصال
ping 192.168.1.1

# إعادة الاتصال بالـ API
curl -X POST /api/routers/1/reconnect

# فحص حالة الخدمة
systemctl status wifi-manager
```

---

## نصائح للاستخدام الفعال

### أفضل الممارسات

#### للمراقبة اليومية:
1. **راجع الصفحة كل ساعة** خلال ساعات الذروة
2. **تابع مؤشرات الحمولة** وتدخل عند اللزوم
3. **راقب أجهزة التوجيه** للتأكد من استمرار الخدمة
4. **راجع السجلات** للبحث عن أنماط غير طبيعية

#### لتحسين الأداء:
1. **وزع العملاء** على أجهزة التوجيه المتاحة
2. **اضبط حدود السرعة** حسب نوع الكرت
3. **راقب استهلاك البيانات** وحذر من الإسراف
4. **أعد تشغيل الأجهزة** عند الحاجة

#### للأمان:
1. **راقب الأنشطة المشبوهة** (استهلاك عالي، مدة طويلة)
2. **اقطع الاتصالات المريبة** فوراً
3. **راجع عناوين MAC** للأجهزة المتكررة
4. **راقب محاولات الدخول الفاشلة**

### اختصارات مفيدة

#### لوحة المفاتيح:
- **F5**: تحديث البيانات
- **Ctrl + F**: البحث في الجدول
- **Space**: تفعيل/إيقاف التحديث التلقائي
- **Esc**: إغلاق النوافذ المنبثقة

#### الماوس:
- **نقرة مزدوجة**: عرض تفاصيل الجلسة
- **نقر بالزر الأيمن**: قائمة الإجراءات السريعة
- **Ctrl + النقر**: تحديد متعدد للجلسات

---

**⚡ نصيحة**: فعّل التحديث التلقائي وراقب التنبيهات للبقاء على اطلاع دائم بحالة الشبكة!