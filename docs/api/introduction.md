# ๐ ููุฏูุฉ ุฅูู API

## ูุธุฑุฉ ุนุงูุฉ

ูููุฑ ูุธุงู ุฅุฏุงุฑุฉ ุดุจูุงุช Wi-Fi ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช (API) ุดุงููุฉ ุชุชูุญ ูููุทูุฑูู ุงูุชูุงูู ูุน ุงููุธุงู ูุฃุชูุชุฉ ุงูุนูููุงุช ุงููุฎุชููุฉ.

## ูููุฒุงุช API

### ๐ ุขูู ููุญูู
- ูุตุงุฏูุฉ JWT ูุชูุฏูุฉ
- ุชุดููุฑ ุฌููุน ุงูุจูุงูุงุช ุงููููููุฉ
- ุตูุงุญูุงุช ูุชุฏุฑุฌุฉ ุญุณุจ ููุน ุงููุณุชุฎุฏู

### ๐ ุดุงูู
- ุฅุฏุงุฑุฉ ุงููุฑูุช ูุงููุณุชุฎุฏููู
- ูุฑุงูุจุฉ ุงูุดุจูุฉ ูุงูุฅุญุตุงุฆูุงุช
- ุงูุชุญูู ูู ุฃุฌูุฒุฉ ุงูุชูุฌูู
- ุชุตุฏูุฑ ุงูุจูุงูุงุช ุจุตูุบ ูุชุนุฏุฏุฉ

### ๐ ุณุฑูุน ูููุซูู
- ุงุณุชุฌุงุจุฉ ุณุฑูุนุฉ (< 100ms ูุนุธู ุงูุทูุจุงุช)
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- ุชูุซูู ุชูุงุนูู ูุงูู

## ุงูุนููุงู ุงูุฃุณุงุณู ููู API

```
https://your-domain.com/api/
```

## ุฅุตุฏุงุฑ API

```
ุงูุฅุตุฏุงุฑ ุงูุญุงูู: v1
```

ุฌููุน endpoints ุชุจุฏุฃ ุจู `/api/` ูุชุจูุนุฉ ุจููุน ุงูุนูููุฉ.

## ุฃููุงุน ุงูุจูุงูุงุช ุงููุฏุนููุฉ

### ุงูุทูุจุงุช (Requests)
- **Content-Type**: `application/json`
- **ุงููุตุงุฏูุฉ**: `Bearer <JWT_TOKEN>`
- **ุงููุบุฉ**: `Accept-Language: ar` (ูููุงุฌูุฉ ุงูุนุฑุจูุฉ)

### ุงูุงุณุชุฌุงุจุงุช (Responses)
- **ุงูุตูุบุฉ**: JSON ุฏุงุฆูุงู
- **ุงูุชุฑููุฒ**: UTF-8
- **ุฃููุงุช ุงูุชูุงุฑูุฎ**: ISO 8601 (UTC)

## ูููู ุงูุงุณุชุฌุงุจุฉ ุงูููุงุณู

### ูุฌุงุญ ุงูุนูููุฉ
```json
{
  "success": true,
  "message": "ุชูุช ุงูุนูููุฉ ุจูุฌุงุญ",
  "data": {
    // ุจูุงูุงุช ุงูุงุณุชุฌุงุจุฉ
  },
  "timestamp": "2025-09-28T20:30:00Z"
}
```

### ูุดู ุงูุนูููุฉ
```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "ุฎุทุฃ ูู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช",
    "details": {
      "field": "email",
      "issue": "ุชูุณูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ"
    }
  },
  "timestamp": "2025-09-28T20:30:00Z"
}
```

## ุฃููุงุฏ ุงูุญุงูุฉ (Status Codes)

### ุงูุญุงูุงุช ุงููุงุฌุญุฉ
- **200 OK**: ุทูุจ ูุงุฌุญ ูุฅุฑุฌุงุน ุงูุจูุงูุงุช
- **201 Created**: ุชู ุฅูุดุงุก ููุฑุฏ ุฌุฏูุฏ ุจูุฌุงุญ
- **204 No Content**: ุทูุจ ูุงุฌุญ ุจุฏูู ุจูุงูุงุช ููุฅุฑุฌุงุน

### ุฃุฎุทุงุก ุงูุนููู
- **400 Bad Request**: ุฎุทุฃ ูู ุจูุงูุงุช ุงูุทูุจ
- **401 Unauthorized**: ูุตุงุฏูุฉ ูุทููุจุฉ ุฃู ูุงุดูุฉ
- **403 Forbidden**: ูุง ุชูุฌุฏ ุตูุงุญูุฉ ูููุตูู
- **404 Not Found**: ุงูููุฑุฏ ุงููุทููุจ ุบูุฑ ููุฌูุฏ
- **422 Unprocessable Entity**: ุจูุงูุงุช ุตุญูุญุฉ ููู ููุทููุงู ุฎุงุทุฆุฉ

### ุฃุฎุทุงุก ุงูุฎุงุฏู
- **500 Internal Server Error**: ุฎุทุฃ ุฏุงุฎูู ูู ุงูุฎุงุฏู
- **503 Service Unavailable**: ุงูุฎุฏูุฉ ุบูุฑ ูุชุงุญุฉ ูุคูุชุงู

## ุญุฏูุฏ ุงูุงุณุชุฎุฏุงู (Rate Limiting)

### ุงูุญุฏูุฏ ุงูุงูุชุฑุงุถูุฉ
- **ุงููุณุชุฎุฏู ุงูุนุงุฏู**: 100 ุทูุจ/ุฏูููุฉ
- **ุงููุฏูุฑ**: 1000 ุทูุจ/ุฏูููุฉ
- **ุงูุทูุจุงุช ุงูุซูููุฉ**: 10 ุทูุจ/ุฏูููุฉ (ูุซู ุงูุชุตุฏูุฑ)

### ุฑุคูุณ ุงููุนูููุงุช
```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 87
X-RateLimit-Reset: 1695750000
```

## ุงููุฌููุนุงุช ุงูุฑุฆูุณูุฉ ููู API

### ๐ ุงููุตุงุฏูุฉ ูุงูุชูููุถ
```
POST /api/auth/login       # ุชุณุฌูู ุงูุฏุฎูู
POST /api/auth/logout      # ุชุณุฌูู ุงูุฎุฑูุฌ
POST /api/auth/refresh     # ุชุฌุฏูุฏ ุงูุฑูุฒ ุงููููุฒ
GET  /api/auth/profile     # ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
```

### ๐ซ ุฅุฏุงุฑุฉ ุงููุฑูุช
```
GET    /api/vouchers       # ูุงุฆูุฉ ุงููุฑูุช
POST   /api/vouchers       # ุฅูุดุงุก ูุฑุช ุฌุฏูุฏ
GET    /api/vouchers/{id}  # ุชูุงุตูู ูุฑุช ูุญุฏุฏ
PUT    /api/vouchers/{id}  # ุชุนุฏูู ูุฑุช
DELETE /api/vouchers/{id}  # ุญุฐู ูุฑุช
POST   /api/vouchers/batch # ุฅูุดุงุก ูุฑูุช ูุชุนุฏุฏุฉ
```

### ๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
```
GET    /api/users          # ูุงุฆูุฉ ุงููุณุชุฎุฏููู
POST   /api/users          # ุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ
GET    /api/users/{id}     # ุชูุงุตูู ูุณุชุฎุฏู
PUT    /api/users/{id}     # ุชุนุฏูู ูุณุชุฎุฏู
DELETE /api/users/{id}     # ุญุฐู ูุณุชุฎุฏู
```

### ๐ ุฅุฏุงุฑุฉ ุงูุดุจูุงุช
```
GET    /api/networks       # ูุงุฆูุฉ ุงูุดุจูุงุช
POST   /api/networks       # ุฅุถุงูุฉ ุดุจูุฉ ุฌุฏูุฏุฉ
GET    /api/routers        # ูุงุฆูุฉ ุฃุฌูุฒุฉ ุงูุชูุฌูู
POST   /api/routers        # ุฅุถุงูุฉ ุฌูุงุฒ ุชูุฌูู
```

### ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
```
GET /api/stats/dashboard   # ุฅุญุตุงุฆูุงุช ููุญุฉ ุงูุชุญูู
GET /api/stats/vouchers    # ุฅุญุตุงุฆูุงุช ุงููุฑูุช
GET /api/stats/usage       # ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู
GET /api/reports/export    # ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ
```

### ๐๏ธ ุงูุชุญูู ูู ุงูุดุจูุฉ
```
GET    /api/control/active     # ุงูุงุชุตุงูุงุช ุงููุดุทุฉ
POST   /api/control/disconnect # ูุทุน ุงุชุตุงู ูุญุฏุฏ
GET    /api/control/monitor    # ูุฑุงูุจุฉ ุงูุดุจูุฉ
```

## ุฃูุซูุฉ ุณุฑูุนุฉ

### ุชุณุฌูู ุงูุฏุฎูู
```bash
curl -X POST https://your-domain.com/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "your-password"
  }'
```

### ุฅูุดุงุก ูุฑุช ุฌุฏูุฏ
```bash
curl -X POST https://your-domain.com/api/vouchers \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "voucher_type": "standard",
    "duration_hours": 24,
    "data_limit_mb": 1000,
    "speed_limit_kbps": 1024
  }'
```

### ุนุฑุถ ุงููุฑูุช ุงููุดุทุฉ
```bash
curl -X GET https://your-domain.com/api/vouchers?status=active \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## ููุชุจุงุช SDK ุงููุชุงุญุฉ

### JavaScript/Node.js
```javascript
import { WiFiManagerAPI } from 'wifi-manager-sdk';

const api = new WiFiManagerAPI({
  baseURL: 'https://your-domain.com/api',
  token: 'YOUR_JWT_TOKEN'
});

// ุฅูุดุงุก ูุฑุช ุฌุฏูุฏ
const voucher = await api.vouchers.create({
  voucher_type: 'standard',
  duration_hours: 24
});
```

### Python
```python
from wifi_manager_sdk import WiFiManagerAPI

api = WiFiManagerAPI(
    base_url='https://your-domain.com/api',
    token='YOUR_JWT_TOKEN'
)

# ุฅูุดุงุก ูุฑุช ุฌุฏูุฏ
voucher = api.vouchers.create(
    voucher_type='standard',
    duration_hours=24
)
```

### PHP
```php
<?php
use WiFiManager\SDK\Client;

$api = new Client([
    'base_url' => 'https://your-domain.com/api',
    'token' => 'YOUR_JWT_TOKEN'
]);

// ุฅูุดุงุก ูุฑุช ุฌุฏูุฏ
$voucher = $api->vouchers()->create([
    'voucher_type' => 'standard',
    'duration_hours' => 24
]);
?>
```

## ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

### ุงูุชุญูู ูู ูุฌุงุญ ุงูุทูุจ
```javascript
if (response.success) {
  // ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุงุฌุญุฉ
  console.log(response.data);
} else {
  // ูุนุงูุฌุฉ ุงูุฎุทุฃ
  console.error(response.error.message);
}
```

### ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ
```javascript
async function retryRequest(apiCall, maxRetries = 3) {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await apiCall();
    } catch (error) {
      if (i === maxRetries - 1) throw error;
      await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));
    }
  }
}
```

## ุงูุฃูุงู ูุฃูุถู ุงูููุงุฑุณุงุช

### ุญูุงูุฉ ุงูุฑููุฒ ุงููููุฒุฉ
- โ ุงุญูุธ JWT ูู ููุงู ุขูู
- โ ุฌุฏุฏ ุงูุฑููุฒ ูุจู ุงูุชูุงุฆูุง
- โ ูุง ุชุดุงุฑู ุงูุฑููุฒ ูู ุงูููุฏ ุงูุนุงู
- โ ุงุณุชุฎุฏู HTTPS ุฏุงุฆูุงู

### ุชุฌูุจ ูุฐู ุงูุฃุฎุทุงุก
- โ ุชุฎุฒูู ูููุงุช ุงููุฑูุฑ ูู ุงููุต ุงูุฎุงู
- โ ุฅุฑุณุงู ุทูุจุงุช ุญุณุงุณุฉ ุนุจุฑ HTTP
- โ ุชุฌุงูู ุฃููุงุฏ ุงูุฃุฎุทุงุก
- โ ุนุฏู ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช

## ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ

### ุงูููุงุฑุฏ ุงููููุฏุฉ
- [ุฏููู ุงููุตุงุฏูุฉ ุงูุชูุตููู](authentication.md)
- [ูุงุฆูุฉ ุดุงููุฉ ุจููุงุท ุงูููุงูุฉ](endpoints.md)
- [ุฃูุซูุฉ ุนูููุฉ ูุชูุฏูุฉ](examples.md)

### ุงูุฏุนู
ุฅุฐุง ูุงุฌูุช ูุดุงูู ูู ุงุณุชุฎุฏุงู API:
1. ุฑุงุฌุน [ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ](../troubleshooting/common-issues.md)
2. ุชุญูู ูู [ุณุฌูุงุช ุงูุฃุฎุทุงุก](../troubleshooting/error-logs.md)
3. ุฌุฑุจ [ุฃุฏูุงุช ุงูุชุดุฎูุต](../troubleshooting/diagnostic-tools.md)

---

**๐ ูุณุชุนุฏ ููุจุฏุกุ** ุงูุชูู ุฅูู [ุฏููู ุงููุตุงุฏูุฉ](authentication.md) ูุจุฏุก ุงุณุชุฎุฏุงู API.